{"code":"import * as tslib_1 from \"tslib\";\r\nimport * as React from 'react';\r\nimport { css } from 'glamor';\r\nimport { Observable } from 'rxjs';\r\nimport { VelocityComponent } from 'velocity-react';\r\nvar SIDE_MARGIN = 20;\r\nvar previewWrapperRules = css({\r\n    height: '100%',\r\n    width: '100%',\r\n    position: 'relative',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center'\r\n});\r\nvar PreviewWrapper = /** @class */ (function (_super) {\r\n    tslib_1.__extends(PreviewWrapper, _super);\r\n    function PreviewWrapper() {\r\n        var _this = _super !== null && _super.apply(this, arguments) || this;\r\n        _this.state = { scale: 1 };\r\n        _this.setWindowResizeSubscription = function () {\r\n            var windowResize$ = Observable.fromEvent(window, 'resize');\r\n            _this.windowResizeSub = windowResize$.debounceTime(250).subscribe({\r\n                next: function (evt) {\r\n                    _this.updatePreviewScale();\r\n                }\r\n            });\r\n        };\r\n        _this.updatePreviewScale = function () {\r\n            var width = _this.props.previewOptions.width;\r\n            var containerToPreviewRatio = (_this.previewContainer.offsetWidth - SIDE_MARGIN * 2) / width;\r\n            if (containerToPreviewRatio < 1) {\r\n                _this.setState({ scale: containerToPreviewRatio });\r\n            }\r\n            else if (containerToPreviewRatio !== 1) {\r\n                _this.setState({ scale: 1 });\r\n            }\r\n        };\r\n        return _this;\r\n    }\r\n    PreviewWrapper.prototype.componentDidMount = function () {\r\n        this.previewContainer = document.getElementById(this.props.for + \"PreviewContainer\");\r\n        this.setWindowResizeSubscription();\r\n        this.updatePreviewScale();\r\n    };\r\n    PreviewWrapper.prototype.componentWillUnmount = function () {\r\n        this.windowResizeSub && this.windowResizeSub.unsubscribe();\r\n    };\r\n    PreviewWrapper.prototype.render = function () {\r\n        var previewOptions = this.props.previewOptions;\r\n        return (React.createElement(\"div\", tslib_1.__assign({ id: this.props.for + \"PreviewContainer\", \"data-website-preview\": this.props.for }, previewWrapperRules),\r\n            React.createElement(VelocityComponent, { animation: {\r\n                    translateZ: 0.001,\r\n                    scale: this.state.scale\r\n                }, easing: \"ease\" }, this.props.children)));\r\n    };\r\n    return PreviewWrapper;\r\n}(React.Component));\r\nexport { PreviewWrapper };\r\n//# sourceMappingURL=PreviewWrapper.js.map","map":{"version":3,"file":"PreviewWrapper.js","sourceRoot":"","sources":["PreviewWrapper.tsx"],"names":[],"mappings":";AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAC/B,OAAO,EAAE,GAAG,EAAE,MAAM,QAAQ,CAAC;AAC7B,OAAO,EAAE,UAAU,EAAE,MAAM,MAAM,CAAC;AAClC,OAAO,EAAE,iBAAiB,EAAE,MAAM,gBAAgB,CAAC;AAEnD,IAAM,WAAW,GAAG,EAAE,CAAC;AAYvB,IAAM,mBAAmB,GAAG,GAAG,CAAC;IAC9B,MAAM,EAAE,MAAM;IACd,KAAK,EAAE,MAAM;IACb,QAAQ,EAAE,UAAU;IACpB,OAAO,EAAE,MAAM;IACf,cAAc,EAAE,QAAQ;IACxB,UAAU,EAAE,QAAQ;CACrB,CAAC,CAAC;AAEH;IAAoC,0CAAsB;IAA1D;QAAA,qEA0DC;QAtDC,WAAK,GAAG,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;QAcb,iCAA2B,GAAG;YACpC,IAAM,aAAa,GAAG,UAAU,CAAC,SAAS,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;YAC7D,KAAI,CAAC,eAAe,GAAG,aAAa,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC;gBAC/D,IAAI,EAAE,UAAA,GAAG;oBACP,KAAI,CAAC,kBAAkB,EAAE,CAAC;gBAC5B,CAAC;aACF,CAAC,CAAC;QACL,CAAC,CAAC;QAEM,wBAAkB,GAAG;YACnB,IAAA,wCAAK,CAA+B;YAC5C,IAAM,uBAAuB,GAC3B,CAAC,KAAI,CAAC,gBAAgB,CAAC,WAAW,GAAG,WAAW,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC;YAChE,EAAE,CAAC,CAAC,uBAAuB,GAAG,CAAC,CAAC,CAAC,CAAC;gBAChC,KAAI,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,uBAAuB,EAAE,CAAC,CAAC;YACpD,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,uBAAuB,KAAK,CAAC,CAAC,CAAC,CAAC;gBACzC,KAAI,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC;YAC9B,CAAC;QACH,CAAC,CAAC;;IAsBJ,CAAC;IApDC,0CAAiB,GAAjB;QACE,IAAI,CAAC,gBAAgB,GAAG,QAAQ,CAAC,cAAc,CAC1C,IAAI,CAAC,KAAK,CAAC,GAAG,qBAAkB,CACpC,CAAC;QACF,IAAI,CAAC,2BAA2B,EAAE,CAAC;QACnC,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC5B,CAAC;IAED,6CAAoB,GAApB;QACE,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,CAAC;IAC7D,CAAC;IAsBD,+BAAM,GAAN;QACU,IAAA,0CAAc,CAAgB;QACtC,MAAM,CAAC,CACL,8CACE,EAAE,EAAK,IAAI,CAAC,KAAK,CAAC,GAAG,qBAAkB,0BACjB,IAAI,CAAC,KAAK,CAAC,GAAG,IAChC,mBAAmB;YAEvB,oBAAC,iBAAiB,IAChB,SAAS,EAAE;oBACT,UAAU,EAAE,KAAK;oBACjB,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK;iBACxB,EACD,MAAM,EAAC,MAAM,IAEZ,IAAI,CAAC,KAAK,CAAC,QAAQ,CACF,CAChB,CACP,CAAC;IACJ,CAAC;IACH,qBAAC;AAAD,CAAC,AA1DD,CAAoC,KAAK,CAAC,SAAS,GA0DlD"},"dts":{"name":"/Users/michaelcorrigan/Code/joy_kit/src/components/preview/web/PreviewWrapper.d.ts","text":"/// <reference types=\"react\" />\r\nimport * as React from 'react';\r\nexport interface Props {\r\n    for: For;\r\n    previewOptions?: {\r\n        height?: number;\r\n        width?: number;\r\n    };\r\n}\r\nexport declare type For = 'dualPane' | 'simpleLayout';\r\nexport declare class PreviewWrapper extends React.Component<Props> {\r\n    private windowResizeSub;\r\n    private previewContainer;\r\n    state: {\r\n        scale: number;\r\n    };\r\n    componentDidMount(): void;\r\n    componentWillUnmount(): void;\r\n    private setWindowResizeSubscription;\r\n    private updatePreviewScale;\r\n    render(): JSX.Element;\r\n}\r\n"}}
