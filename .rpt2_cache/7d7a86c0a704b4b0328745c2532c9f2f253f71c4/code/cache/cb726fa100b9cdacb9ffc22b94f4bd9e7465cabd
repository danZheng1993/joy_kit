{"code":"import * as tslib_1 from \"tslib\";\r\nimport * as React from 'react';\r\nimport { css } from 'glamor';\r\nvar moment = require('moment');\r\nvar countdownRules = function (_a) {\r\n    var color = _a.color, fontSize = _a.fontSize, fontWeight = _a.fontWeight, margin = _a.margin;\r\n    return css({\r\n        color: color,\r\n        fontSize: fontSize,\r\n        fontWeight: fontWeight,\r\n        margin: margin\r\n    });\r\n};\r\nvar CountdownTimer = /** @class */ (function (_super) {\r\n    tslib_1.__extends(CountdownTimer, _super);\r\n    function CountdownTimer(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.todayMoment = moment();\r\n        _this.startCountdown = function () {\r\n            if (_this.isEventMomentValid()) {\r\n                _this.timeLapseInterval = window.setInterval(function () {\r\n                    _this.todayMoment.add(1, 'seconds');\r\n                    _this.updateDisplayText();\r\n                }, 1000);\r\n            }\r\n        };\r\n        _this.stopCountdown = function () {\r\n            window.clearInterval(_this.timeLapseInterval);\r\n        };\r\n        _this.isEventMomentValid = function () {\r\n            return _this.eventMoment && _this.eventMoment.isValid();\r\n        };\r\n        _this.isEventToday = function () {\r\n            return _this.eventMoment && _this.eventMoment.isSame(_this.todayMoment, 'day');\r\n        };\r\n        _this.updateDisplayText = function () {\r\n            _this.setState({\r\n                displayText: _this.getTimeLapseText()\r\n            });\r\n        };\r\n        _this.getDifference = function (differenceFormat, difference) {\r\n            if (difference === 0 && differenceFormat !== 'Sec') {\r\n                return null;\r\n            }\r\n            var formatPluralization = difference > 1 ? differenceFormat + \"s\" : differenceFormat;\r\n            return difference + \" \" + formatPluralization;\r\n        };\r\n        _this.getDayDifference = function (timeLapse) {\r\n            return _this.getDifference('Day', Math.floor(timeLapse / (1000 * 60 * 60 * 24)));\r\n        };\r\n        _this.getHourDifference = function (timeLapse) {\r\n            return _this.getDifference('Hr', Math.floor((timeLapse / (1000 * 60 * 60)) % 24));\r\n        };\r\n        _this.getMinuteDifference = function (timeLapse) {\r\n            return _this.getDifference('Min', Math.floor((timeLapse / 1000 / 60) % 60));\r\n        };\r\n        _this.getSecondDifference = function (timeLapse) {\r\n            return _this.getDifference('Sec', Math.floor((timeLapse / 1000) % 60));\r\n        };\r\n        _this.getTimeLapseText = function () {\r\n            if (_this.isEventToday() || !_this.isEventMomentValid()) {\r\n                return 'Today';\r\n            }\r\n            var differenceInMilliseconds = _this.todayMoment.diff(_this.eventMoment);\r\n            var differenceAbsoluteValue = Math.abs(differenceInMilliseconds);\r\n            var timeLapse = [\r\n                _this.getDayDifference,\r\n                _this.getHourDifference,\r\n                _this.getMinuteDifference,\r\n                _this.getSecondDifference\r\n            ]\r\n                .map(function (func) { return func(differenceAbsoluteValue); })\r\n                .join(' ');\r\n            return timeLapse + \" \" + (differenceInMilliseconds > 0 ? 'ago' : '');\r\n        };\r\n        _this.eventMoment = moment(_this.props.eventDate);\r\n        _this.state = {\r\n            displayText: _this.getTimeLapseText()\r\n        };\r\n        return _this;\r\n    }\r\n    CountdownTimer.prototype.componentWillMount = function () {\r\n        this.startCountdown();\r\n    };\r\n    CountdownTimer.prototype.componentWillReceiveProps = function (nextProps) {\r\n        if (this.props.eventDate !== nextProps.eventDate) {\r\n            this.eventMoment = moment(nextProps.eventDate);\r\n            if (this.isEventMomentValid()) {\r\n                this.updateDisplayText();\r\n            }\r\n            else {\r\n                this.stopCountdown();\r\n            }\r\n        }\r\n    };\r\n    CountdownTimer.prototype.componentWillUnmount = function () {\r\n        this.stopCountdown();\r\n    };\r\n    CountdownTimer.prototype.render = function () {\r\n        if (!this.props.eventDate || !this.eventMoment.isValid()) {\r\n            return null;\r\n        }\r\n        return React.createElement(\"h4\", tslib_1.__assign({}, countdownRules(this.props)), this.state.displayText);\r\n    };\r\n    CountdownTimer.defaultProps = {\r\n        fontWeight: 400,\r\n        fontSize: 15,\r\n        margin: 0\r\n    };\r\n    return CountdownTimer;\r\n}(React.Component));\r\nexport { CountdownTimer };\r\n//# sourceMappingURL=CountdownTimer.js.map","map":{"version":3,"file":"CountdownTimer.js","sourceRoot":"","sources":["CountdownTimer.tsx"],"names":[],"mappings":"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"},"dts":{"name":"/Users/michaelcorrigan/Code/joy_kit/src/components/countdownTimer/CountdownTimer.d.ts","text":"/// <reference types=\"react\" />\r\nimport * as React from 'react';\r\nexport interface Props {\r\n    eventDate?: string | number;\r\n    color?: string;\r\n    fontSize?: string | number;\r\n    fontWeight?: string | number;\r\n    margin?: string | number;\r\n}\r\ndeclare class CountdownTimer extends React.Component<Props, any> {\r\n    static defaultProps: {\r\n        fontWeight: number;\r\n        fontSize: number;\r\n        margin: number;\r\n    };\r\n    private timeLapseInterval;\r\n    private todayMoment;\r\n    private eventMoment;\r\n    constructor(props: any);\r\n    componentWillMount(): void;\r\n    componentWillReceiveProps(nextProps: any): void;\r\n    componentWillUnmount(): void;\r\n    private startCountdown;\r\n    private stopCountdown;\r\n    private isEventMomentValid;\r\n    private isEventToday;\r\n    private updateDisplayText;\r\n    private getDifference;\r\n    private getDayDifference;\r\n    private getHourDifference;\r\n    private getMinuteDifference;\r\n    private getSecondDifference;\r\n    private getTimeLapseText;\r\n    render(): JSX.Element;\r\n}\r\nexport { CountdownTimer };\r\n"}}
